# é…ç½®é©±åŠ¨é¡µé¢ç”Ÿæˆç³»ç»Ÿ - ä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç³»ç»Ÿæ¦‚è¿°

é…ç½®é©±åŠ¨çš„é¡µé¢ç”Ÿæˆç³»ç»Ÿå·²ç»æˆåŠŸéƒ¨ç½²åˆ°é¡¹ç›®ä¸­ï¼Œç°åœ¨ä½ å¯ä»¥é€šè¿‡ç®€å•çš„é…ç½®æ–‡ä»¶æ¥ç®¡ç†æ‰€æœ‰é¡µé¢ï¼Œè€Œä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹è·¯ç”±å’Œèœå•æ–‡ä»¶ã€‚

### 2. æ ¸å¿ƒæ–‡ä»¶

- **é…ç½®æ–‡ä»¶**: `src/config/pages.json` - æ‰€æœ‰é¡µé¢çš„é…ç½®ä¿¡æ¯
- **åŠ¨æ€é¡µé¢ç»„ä»¶**: `src/components/DynamicPage.vue` - æ ¹æ®é…ç½®æ¸²æŸ“é¡µé¢
- **èµ„æºæ¸²æŸ“å™¨**: `src/components/ResourceRenderer.vue` - åŠ¨æ€æ¸²æŸ“ä¸åŒç±»å‹çš„èµ„æºæ§ä»¶
- **é¡µé¢ç”Ÿæˆå·¥å…·**: `src/utils/pageGenerator.js` - è¾…åŠ©å·¥å…·å‡½æ•°

## ğŸ“ æ–°å¢é¡µé¢æµç¨‹

### æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨é…ç½®ï¼ˆæ¨èï¼‰

1. **åœ¨ `src/config/pages.json` ä¸­æ·»åŠ é¡µé¢é…ç½®**ï¼š

```json
{
  "id": "newPage",
  "title": "æ–°é¡µé¢",
  "path": "/new-page",
  "image": "å›¾ç‰‡URLæˆ–æœ¬åœ°è·¯å¾„",
  "category": "study",
  "components": {
    "phone": "study/NewPage/new-page-phone",
    "pad": "study/NewPage/new-page-pad"
  },
  "resources": [
    {
      "id": 1,
      "name": "èƒŒæ™¯å›¾",
      "type": "upload",
      "widthExact": 375,
      "heightExact": 200,
      "helpLink": "å¸®åŠ©é“¾æ¥"
    }
  ]
}
```

2. **åˆ›å»ºå¯¹åº”çš„ç»„ä»¶æ–‡ä»¶**ï¼š
   - `src/components/study/NewPage/new-page-phone.vue`
   - `src/components/study/NewPage/new-page-pad.vue`

3. **é‡å¯å¼€å‘æœåŠ¡å™¨**ï¼ˆè·¯ç”±ä¼šè‡ªåŠ¨ç”Ÿæˆï¼‰

### æ–¹æ³•äºŒï¼šä½¿ç”¨ç”Ÿæˆå·¥å…·

```javascript
import { createNewPage, resourceTemplates } from '@/utils/pageGenerator'

// åˆ›å»ºæ–°é¡µé¢
createNewPage({
  id: 'newPage',
  title: 'æ–°é¡µé¢',
  category: 'study',
  image: 'https://example.com/image.png',
  resources: [
    resourceTemplates.imageUpload(1, 'èƒŒæ™¯å›¾', 375, 200, 'https://help.link'),
    resourceTemplates.textInput(2, 'æ ‡é¢˜', 'è¯·è¾“å…¥æ ‡é¢˜', 'updateTitle')
  ]
})
```

## ğŸ¨ èµ„æºç±»å‹é…ç½®

### å›¾ç‰‡ä¸Šä¼ 
```json
{
  "id": 1,
  "name": "èƒŒæ™¯å›¾",
  "type": "upload",
  "widthExact": 375,
  "heightExact": 200,
  "minWidth": 300,
  "maxWidth": 500,
  "helpLink": "å¸®åŠ©é“¾æ¥"
}
```

### å›¾ç‰‡å¡ç‰‡ä¸Šä¼ 
```json
{
  "id": 2,
  "name": "è½®æ’­å›¾",
  "type": "upload-picture-card",
  "minSize": { "width": 480, "height": 270 },
  "helpLink": "å¸®åŠ©é“¾æ¥"
}
```

### é¢œè‰²é€‰æ‹©å™¨
```json
{
  "id": 3,
  "name": "ä¸»é¢˜è‰²",
  "type": "color",
  "presetColors": ["#ff0000", "#00ff00", "#0000ff"],
  "eventName": "updateThemeColor"
}
```

### ä¸‹æ‹‰é€‰æ‹©
```json
{
  "id": 4,
  "name": "é…è‰²æ–¹æ¡ˆ",
  "type": "select",
  "options": [
    { "value": "blue", "label": "è“è‰²" },
    { "value": "red", "label": "çº¢è‰²" }
  ],
  "helpLink": "å¸®åŠ©é“¾æ¥",
  "eventName": "updateColorScheme"
}
```

### æ–‡æœ¬è¾“å…¥
```json
{
  "id": 5,
  "name": "æ ‡é¢˜",
  "type": "input",
  "placeholder": "è¯·è¾“å…¥æ ‡é¢˜",
  "eventName": "updateTitle"
}
```

## ğŸ”§ ç»„ä»¶å¼€å‘æŒ‡å—

### ç»„ä»¶æ¨¡æ¿

```vue
<template>
  <div class="component-container">
    <!-- ä½ çš„ç»„ä»¶å†…å®¹ -->
    <h1>{{ title }}</h1>
    <img v-if="backgroundImage" :src="backgroundImage" alt="èƒŒæ™¯å›¾" />
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import emitter from '@/utils/emitter'

// å“åº”å¼æ•°æ®
const title = ref('é»˜è®¤æ ‡é¢˜')
const backgroundImage = ref('')

/**
 * ç»„ä»¶æŒ‚è½½æ—¶çš„åˆå§‹åŒ–
 */
onMounted(() => {
  // ç›‘å¬èµ„æºæ›´æ–°äº‹ä»¶
  emitter.on('updateImage1', handleBackgroundUpdate)
  emitter.on('updateTitle', handleTitleUpdate)
})

/**
 * å¤„ç†èƒŒæ™¯å›¾æ›´æ–°
 * @param {string} imageUrl - å›¾ç‰‡URL
 */
const handleBackgroundUpdate = (imageUrl) => {
  backgroundImage.value = imageUrl
}

/**
 * å¤„ç†æ ‡é¢˜æ›´æ–°
 * @param {string} newTitle - æ–°æ ‡é¢˜
 */
const handleTitleUpdate = (newTitle) => {
  title.value = newTitle
}
</script>

<style scoped>
.component-container {
  width: 100%;
  height: 100%;
  /* ä½ çš„æ ·å¼ */
}
</style>
```

### äº‹ä»¶ç³»ç»Ÿ

ç³»ç»Ÿä½¿ç”¨äº‹ä»¶æ€»çº¿æ¥å¤„ç†èµ„æºå˜åŒ–ï¼š

- **å›¾ç‰‡èµ„æº**: `updateImage{resourceId}` (å¦‚: `updateImage1`)
- **è‡ªå®šä¹‰äº‹ä»¶**: ä½¿ç”¨é…ç½®ä¸­çš„ `eventName` å­—æ®µ

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ pages.json              # é¡µé¢é…ç½®æ–‡ä»¶
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ DynamicPage.vue         # åŠ¨æ€é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ ResourceRenderer.vue    # èµ„æºæ¸²æŸ“ç»„ä»¶
â”‚   â”œâ”€â”€ square/                 # å¹¿åœºé¡µç»„ä»¶
â”‚   â”œâ”€â”€ study/                  # å­¦ä¹ é¡µç»„ä»¶
â”‚   â””â”€â”€ mine/                   # æˆ‘çš„é¡µç»„ä»¶
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ pageGenerator.js        # é¡µé¢ç”Ÿæˆå·¥å…·
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ menu.vue               # èœå•é¡µï¼ˆå·²æ›´æ–°ä¸ºé…ç½®é©±åŠ¨ï¼‰
â””â”€â”€ router/
    â””â”€â”€ router.ts              # è·¯ç”±é…ç½®ï¼ˆå·²æ›´æ–°ä¸ºåŠ¨æ€ç”Ÿæˆï¼‰
```

## ğŸ”„ è¿ç§»ç°æœ‰é¡µé¢

### 1. åˆ†æç°æœ‰é¡µé¢

æŸ¥çœ‹ç°æœ‰é¡µé¢çš„ç»“æ„ï¼Œè¯†åˆ«ï¼š
- é¡µé¢è·¯å¾„å’Œæ ‡é¢˜
- ä½¿ç”¨çš„ç»„ä»¶
- èµ„æºé…ç½®ï¼ˆä¸Šä¼ ç»„ä»¶ã€é€‰æ‹©å™¨ç­‰ï¼‰

### 2. æ·»åŠ åˆ°é…ç½®æ–‡ä»¶

å°†é¡µé¢ä¿¡æ¯æ·»åŠ åˆ° `pages.json` ä¸­

### 3. æµ‹è¯•éªŒè¯

ç¡®ä¿é¡µé¢åœ¨æ–°ç³»ç»Ÿä¸­æ­£å¸¸å·¥ä½œ

### 4. æ¸…ç†æ—§ä»£ç 

ç§»é™¤è·¯ç”±æ–‡ä»¶ä¸­çš„æ‰‹åŠ¨é…ç½®

## ğŸ¯ æœ€ä½³å®è·µ

### 1. å‘½åè§„èŒƒ

- **é¡µé¢ID**: ä½¿ç”¨é©¼å³°å‘½åï¼Œå¦‚ `homeActivityCard`
- **ç»„ä»¶è·¯å¾„**: ä½¿ç”¨åˆ†ç±»/é¡µé¢/ç±»å‹çš„ç»“æ„ï¼Œå¦‚ `study/HomeActivityCard/box-phone`
- **èµ„æºID**: ä½¿ç”¨æ•°å­—ï¼Œä»1å¼€å§‹é€’å¢

### 2. ç»„ä»¶ç»„ç»‡

```
components/
â”œâ”€â”€ åˆ†ç±»å/
â”‚   â”œâ”€â”€ é¡µé¢å/
â”‚   â”‚   â”œâ”€â”€ é¡µé¢å-phone.vue
â”‚   â”‚   â”œâ”€â”€ é¡µé¢å-pad.vue
â”‚   â”‚   â””â”€â”€ å­ç»„ä»¶/
```

### 3. èµ„æºé…ç½®

- ä¸ºæ¯ä¸ªèµ„æºæä¾›æ¸…æ™°çš„åç§°å’Œå¸®åŠ©é“¾æ¥
- ä½¿ç”¨åˆé€‚çš„å°ºå¯¸é™åˆ¶
- ä¸ºäº¤äº’å…ƒç´ æä¾› `eventName`

### 4. å›¾ç‰‡èµ„æº

- ä¼˜å…ˆä½¿ç”¨CDNé“¾æ¥
- æœ¬åœ°å›¾ç‰‡ä½¿ç”¨ `@/assets/` è·¯å¾„
- åœ¨èœå•é…ç½®ä¸­æ­£ç¡®å¤„ç†æœ¬åœ°å›¾ç‰‡å¯¼å…¥

## ğŸ› å¸¸è§é—®é¢˜

### Q: æ–°å¢é¡µé¢åçœ‹ä¸åˆ°ï¼Ÿ
A: ç¡®ä¿é‡å¯äº†å¼€å‘æœåŠ¡å™¨ï¼Œè·¯ç”±æ˜¯åœ¨å¯åŠ¨æ—¶ç”Ÿæˆçš„ã€‚

### Q: ç»„ä»¶åŠ è½½å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ç»„ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿æ–‡ä»¶å­˜åœ¨ã€‚

### Q: èµ„æºäº‹ä»¶ä¸å“åº”ï¼Ÿ
A: ç¡®ä¿åœ¨ç»„ä»¶ä¸­æ­£ç¡®ç›‘å¬äº†äº‹ä»¶ï¼Œäº‹ä»¶åç§°è¦ä¸é…ç½®ä¸­çš„ä¸€è‡´ã€‚

### Q: æœ¬åœ°å›¾ç‰‡ä¸æ˜¾ç¤ºï¼Ÿ
A: æ£€æŸ¥èœå•é¡µé¢ä¸­çš„å›¾ç‰‡è·¯å¾„æ˜ å°„æ˜¯å¦æ­£ç¡®ã€‚

## ğŸ”® æœªæ¥æ‰©å±•

### 1. é¡µé¢æ¨¡æ¿

å¯ä»¥åˆ›å»ºé¡µé¢æ¨¡æ¿ï¼Œå¿«é€Ÿç”Ÿæˆç›¸ä¼¼é¡µé¢ï¼š

```json
{
  "templates": {
    "studyPage": {
      "components": {
        "phone": "study/template/phone",
        "pad": "study/template/pad"
      },
      "defaultResources": [...]
    }
  }
}
```

### 2. æ¡ä»¶æ¸²æŸ“

æ”¯æŒæ ¹æ®æ¡ä»¶æ˜¾ç¤ºä¸åŒçš„èµ„æºï¼š

```json
{
  "resources": [
    {
      "name": "ä¸»é¢˜è‰²",
      "type": "color",
      "condition": {
        "field": "theme",
        "value": "custom"
      }
    }
  ]
}
```

### 3. æ‰¹é‡æ“ä½œ

æ”¯æŒæ‰¹é‡åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤é¡µé¢çš„å·¥å…·ã€‚

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š

1. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥é…ç½®æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®
3. ç¡®è®¤ç»„ä»¶æ–‡ä»¶è·¯å¾„æ˜¯å¦å­˜åœ¨
4. å‚è€ƒç°æœ‰é¡µé¢çš„é…ç½®ç¤ºä¾‹

é…ç½®é©±åŠ¨çš„é¡µé¢ç”Ÿæˆç³»ç»Ÿè®©é¡µé¢ç®¡ç†å˜å¾—æ›´åŠ ç®€å•å’Œè§„èŒƒï¼Œäº«å—é«˜æ•ˆçš„å¼€å‘ä½“éªŒï¼ ğŸ‰